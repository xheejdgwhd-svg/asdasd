<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Handâ€‘Drawing</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
  <meta name="theme-color" content="#0f172a">
</head>
<body>
  <header class="topbar">
    <h1>âœ‹ğŸ¨ AI Handâ€‘Drawing</h1>
    <div class="actions">
      <button id="btnStart">Start Camera</button>
      <button id="btnStop" disabled>Stop</button>
      <button id="btnClear">Clear</button>
      <button id="btnUndo" disabled>Undo</button>
      <button id="btnRedo" disabled>Redo</button>
      <button id="btnNewLayer">+ Layer</button>
      <button id="btnToggleLayer">ğŸ‘ Layer</button>
      <a id="btnDownload" download="drawing.png">Download PNG</a>
    </div>
  </header>

  <main class="stage">
    <video id="video" playsinline muted></video>
    <canvas id="overlay"></canvas>
    <canvas id="composite"></canvas>

    <aside class="panel">
      <section>
        <label>Brush size <input id="size" type="range" min="1" max="40" value="6"></label>
        <label>Opacity <input id="opacity" type="range" min="0.05" max="1" step="0.01" value="1"></label>
        <label>Color <input id="color" type="color" value="#00e0ff"></label>
      </section>
      <section>
        <label><input id="speedWidth" type="checkbox" checked> Speed â†’ Width</label>
        <label><input id="speedOpacity" type="checkbox"> Speed â†’ Opacity</label>
        <label>Sensitivity <input id="sensitivity" type="range" min="0.01" max="0.08" step="0.005" value="0.035"></label>
        <label><input id="twoHands" type="checkbox"> Twoâ€‘hand drawing</label>
        <label><input id="showLandmarks" type="checkbox"> Show landmarks</label>
      </section>
      <section class="layersInfo">
        <div>Layer: <span id="layerIndex">1</span>/<span id="layerTotal">1</span></div>
      </section>
    </aside>
  </main>

  <footer class="foot">
    <small>Pinch indexâ€‘thumb to draw. Release to pause. Works with MediaPipe Hands via CDN. Install as PWA for offline.</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").catch(console.warn);
      });
    }
  </script>
</body>
</html>
